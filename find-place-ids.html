<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find Google Place IDs - Atlas Fitness</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
        .search-section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
        .results { margin-top: 20px; padding: 20px; background: #f5f5f5; border-radius: 8px; }
        .place-id { font-family: monospace; background: #fff; padding: 5px 10px; border: 1px solid #ddd; }
        .success { color: green; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>Find Google Place IDs for Atlas Fitness</h1>
    
    <div class="search-section">
        <h2>Search for Locations</h2>
        <button onclick="searchPlace('Atlas Fitness Harrogate HG1 4BA')">Atlas Fitness Harrogate</button>
        <button onclick="searchPlace('Atlas Fitness York YO30 4XD')">Atlas Fitness York</button>
        <button onclick="searchPlace('Schofield Fitness Ltd Harrogate')">Schofield Fitness Harrogate</button>
        <button onclick="searchPlace('Schofield Fitness Ltd York')">Schofield Fitness York</button>
        
        <div id="results"></div>
    </div>
    
    <div class="search-section">
        <h2>Configuration Code</h2>
        <p>Once you find the Place IDs, update your config.js file:</p>
        <pre id="config-code"></pre>
    </div>

    <script>
        let foundPlaceIds = {
            harrogate: null,
            york: null
        };

        async function searchPlace(query) {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `<p>Searching for: "${query}"...</p>`;
            
            try {
                const response = await fetch(`/api/find-place?query=${encodeURIComponent(query)}`);
                const data = await response.json();
                
                if (data.candidates && data.candidates.length > 0) {
                    let html = `<div class="results"><h3>Results for: "${query}"</h3>`;
                    
                    data.candidates.forEach(place => {
                        html += `
                            <div style="margin: 10px 0; padding: 10px; border: 1px solid #ccc;">
                                <strong>${place.name}</strong><br>
                                ${place.formatted_address}<br>
                                Place ID: <span class="place-id">${place.place_id}</span><br>
                                ${place.rating ? `Rating: ${place.rating} (${place.user_ratings_total} reviews)` : ''}
                                <br>
                                <button onclick="usePlaceId('${query.includes('Harrogate') ? 'harrogate' : 'york'}', '${place.place_id}')">
                                    Use this Place ID
                                </button>
                            </div>
                        `;
                    });
                    
                    html += '</div>';
                    resultsDiv.innerHTML = html;
                } else {
                    resultsDiv.innerHTML = `<p class="error">No results found for "${query}"</p>`;
                }
            } catch (error) {
                resultsDiv.innerHTML = `<p class="error">Error: ${error.message}</p>`;
            }
        }

        function usePlaceId(location, placeId) {
            foundPlaceIds[location] = placeId;
            updateConfigCode();
            alert(`${location} Place ID set to: ${placeId}`);
        }

        function updateConfigCode() {
            const code = `// Update config.js with these Place IDs:
const ATLAS_CONFIG = {
    places: {
        harrogate: {
            placeId: '${foundPlaceIds.harrogate || 'ChIJ_PLACEHOLDER_HARROGATE'}',
            businessName: 'Atlas Fitness Harrogate',
            coordinates: {
                lat: 53.9906,
                lng: -1.5418
            }
        },
        york: {
            placeId: '${foundPlaceIds.york || 'ChIJ_PLACEHOLDER_YORK'}',
            businessName: 'Atlas Fitness York',
            coordinates: {
                lat: 53.9897,
                lng: -1.0863
            }
        }
    }
};`;
            
            document.getElementById('config-code').textContent = code;
        }

        // Initialize
        updateConfigCode();
    </script>
</body>
</html>